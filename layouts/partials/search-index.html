{{ $scripts := slice (resources.Get "js/index.js") }}


{{ if not .Site.Params.noExtraJS }}
  {{ $scripts = $scripts | append (resources.Get "js/footer_scripts.js") }}
{{ end }}

{{ if not .Site.Params.noSearch }}
<script>
  window.store = {
    {{ range .Site.Pages }}
    "{{ .Permalink }}": {
      "title": "{{ .Title  }}",
      "tags": [{{ range .Params.Tags }}"{{ . }}",{{ end }}],
      "content": {{ .Content | plainify }}, // Strip out HTML tags
      "url": "{{ .Permalink }}"
    },
    {{ end }}
  }
</script>
  {{ $scripts = $scripts | append (resources.Get "js/lunr_v2.3.9.js") }}
  {{ $scripts = $scripts | append (resources.Get "js/search.js") }}
{{ end }}

{{ $JS := $scripts | resources.Concat "js/bundle.js" | minify | fingerprint "sha256" }}
<script type="text/javascript" src="{{ $JS.RelPermalink }}" integrity="{{ $JS.Data.Integrity }}" crossorigin=anonymous defer></script>
